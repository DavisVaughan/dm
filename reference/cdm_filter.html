<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Filtering a <code><a href='dm.html'>dm</a></code> object — cdm_filter • dm</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Filtering a <code><a href='dm.html'>dm</a></code> object — cdm_filter" />
<meta property="og:description" content="Filtering one table of a dm object has an effect on all tables connected to this table
via one or more steps of foreign key relations. Firstly, one or more filter conditions for
one or more tables can be defined using cdm_filter(), with a syntax similar to dplyr::filter().
These conditions will be stored in the dm and not immediately executed. With cdm_apply_filters()
all tables will be updated according to the filter conditions and the foreign key relations." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dm</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.3.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/dm.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/dm-class-and-basic-operations.html">Class 'dm' and basic operations</a>
    </li>
    <li>
      <a href="../articles/dm-introduction-relational-data-model.html">Introduction to Relational Data Models</a>
    </li>
    <li>
      <a href="../articles/dm-joining.html">Joining in Relational Data Models</a>
    </li>
    <li>
      <a href="../articles/dm-filtering.html">Filtering in Relational Data Models</a>
    </li>
    <li>
      <a href="../articles/dm-visualization.html">Visualizing 'dm' objects</a>
    </li>
    <li>
      <a href="../articles/dm-low-level.html">Low level operations</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/krlmlr/dm">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Filtering a <code><a href='dm.html'>dm</a></code> object</h1>
    
    <div class="hidden name"><code>cdm_filter.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Filtering one table of a <code><a href='dm.html'>dm</a></code> object has an effect on all tables connected to this table
via one or more steps of foreign key relations. Firstly, one or more filter conditions for
one or more tables can be defined using <code>cdm_filter()</code>, with a syntax similar to <code><a href='https://dplyr.tidyverse.org/reference/filter.html'>dplyr::filter()</a></code>.
These conditions will be stored in the <code><a href='dm.html'>dm</a></code> and not immediately executed. With <code>cdm_apply_filters()</code>
all tables will be updated according to the filter conditions and the foreign key relations.</p>
    </div>

    <pre class="usage"><span class='fu'>cdm_filter</span>(<span class='no'>dm</span>, <span class='no'>table</span>, <span class='no'>...</span>)

<span class='fu'>cdm_apply_filters</span>(<span class='no'>dm</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dm</th>
      <td><p>A <code>dm</code> object.</p></td>
    </tr>
    <tr>
      <th>table</th>
      <td><p>A table in the <code>dm</code></p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Logical predicates defined in terms of the variables in <code>.data</code>, passed on to <code><a href='https://dplyr.tidyverse.org/reference/filter.html'>dplyr::filter()</a></code>.
Multiple conditions are combined with <code>&amp;</code> or <code>,</code>. Only rows where the condition evaluates
to TRUE are kept.</p>
<p>The arguments in ... are automatically quoted and evaluated in the context of
the data frame. They support unquoting and splicing. See <code><a href='https://dplyr.tidyverse.org/articles/programming.html'>vignette("programming", package = "dplyr")</a></code>
for an introduction to these concepts.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>cdm_filter()</code> allows you to set one or more filter conditions for one table
of a <code><a href='dm.html'>dm</a></code> object. These conditions will be stored in the <code><a href='dm.html'>dm</a></code> for when they are needed.
Once executed, the filtering the will affect all tables connected to the filtered one by
foreign key constraints, leaving only the rows with the corresponding key values. The filtering
implicitly takes place, once a table is requested from the <code><a href='dm.html'>dm</a></code> by using one of <code><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl()</a></code>, <code>[[.dm()</code>, <code>$.dm()</code>.</p>
<p>With <code>cdm_apply_filters()</code> all set filter conditions are applied and their
combined cascading effect on each table of the <code><a href='dm.html'>dm</a></code> is taken into account, producing a new
<code>dm</code> object.
This function is called by the <code><a href='https://dplyr.tidyverse.org/reference/compute.html'>compute()</a></code> method for <code>dm</code> class objects.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)

<span class='no'>dm_nyc_filtered</span> <span class='kw'>&lt;-</span>
  <span class='fu'><a href='cdm_nycflights13.html'>cdm_nycflights13</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>cdm_filter</span>(<span class='no'>airports</span>, <span class='no'>name</span> <span class='kw'>==</span> <span class='st'>"John F Kennedy Intl"</span>)

<span class='fu'><a href='https://dplyr.tidyverse.org/reference/tbl.html'>tbl</a></span>(<span class='no'>dm_nyc_filtered</span>, <span class='st'>"flights"</span>)</div><div class='output co'>#&gt; # A tibble: 111,279 x 19
#&gt;     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
#&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
#&gt;  1  2013     1     1      542            540         2      923            850
#&gt;  2  2013     1     1      544            545        -1     1004           1022
#&gt;  3  2013     1     1      557            600        -3      838            846
#&gt;  4  2013     1     1      558            600        -2      849            851
#&gt;  5  2013     1     1      558            600        -2      853            856
#&gt;  6  2013     1     1      558            600        -2      924            917
#&gt;  7  2013     1     1      559            559         0      702            706
#&gt;  8  2013     1     1      606            610        -4      837            845
#&gt;  9  2013     1     1      611            600        11      945            931
#&gt; 10  2013     1     1      613            610         3      925            921
#&gt; # … with 111,269 more rows, and 11 more variables: arr_delay &lt;dbl&gt;,
#&gt; #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
#&gt; #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</div><div class='input'><span class='no'>dm_nyc_filtered</span><span class='kw'>[[</span><span class='st'>"planes"</span>]]</div><div class='output co'>#&gt; # A tibble: 1,381 x 9
#&gt;    tailnum  year type          manufacturer   model  engines seats speed engine 
#&gt;    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;          &lt;chr&gt;    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
#&gt;  1 N102UW   1998 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  2 N103US   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  3 N104UW   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  4 N105UW   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  5 N107US   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  6 N108UW   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  7 N109UW   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  8 N110UW   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt;  9 N111US   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt; 10 N112US   1999 Fixed wing m… AIRBUS INDUST… A320-…       2   182    NA Turbo-…
#&gt; # … with 1,371 more rows</div><div class='input'><span class='no'>dm_nyc_filtered</span>$<span class='no'>airlines</span></div><div class='output co'>#&gt; # A tibble: 10 x 2
#&gt;    carrier name                    
#&gt;    &lt;chr&gt;   &lt;chr&gt;                   
#&gt;  1 9E      Endeavor Air Inc.       
#&gt;  2 AA      American Airlines Inc.  
#&gt;  3 B6      JetBlue Airways         
#&gt;  4 DL      Delta Air Lines Inc.    
#&gt;  5 EV      ExpressJet Airlines Inc.
#&gt;  6 HA      Hawaiian Airlines Inc.  
#&gt;  7 MQ      Envoy Air               
#&gt;  8 UA      United Air Lines Inc.   
#&gt;  9 US      US Airways Inc.         
#&gt; 10 VX      Virgin America          </div><div class='input'>
<span class='fu'><a href='cdm_nycflights13.html'>cdm_nycflights13</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>cdm_filter</span>(<span class='no'>airports</span>, <span class='no'>name</span> <span class='kw'>==</span> <span class='st'>"John F Kennedy Intl"</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>cdm_apply_filters</span>()</div><div class='output co'>#&gt; ── Table source ────────────────────────────────────────────────────────────────
#&gt; src:  &lt;environment: R_GlobalEnv&gt;
#&gt; ── Data model ──────────────────────────────────────────────────────────────────
#&gt; Tables: `airlines`, `airports`, `flights`, `planes`, `weather`
#&gt; Columns: 53
#&gt; Primary keys: 3
#&gt; Foreign keys: 3
#&gt; ── Filters ─────────────────────────────────────────────────────────────────────
#&gt; None</div><div class='input'><span class='fu'><a href='cdm_nycflights13.html'>cdm_nycflights13</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>cdm_filter</span>(<span class='no'>flights</span>, <span class='no'>month</span> <span class='kw'>==</span> <span class='fl'>3</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>cdm_apply_filters</span>()</div><div class='output co'>#&gt; ── Table source ────────────────────────────────────────────────────────────────
#&gt; src:  &lt;environment: R_GlobalEnv&gt;
#&gt; ── Data model ──────────────────────────────────────────────────────────────────
#&gt; Tables: `airlines`, `airports`, `flights`, `planes`, `weather`
#&gt; Columns: 53
#&gt; Primary keys: 3
#&gt; Foreign keys: 3
#&gt; ── Filters ─────────────────────────────────────────────────────────────────────
#&gt; None</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)
<span class='fu'><a href='cdm_nycflights13.html'>cdm_nycflights13</a></span>() <span class='kw'>%&gt;%</span>
  <span class='fu'>cdm_filter</span>(<span class='no'>planes</span>, <span class='no'>engine</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Reciprocating"</span>, <span class='st'>"4 Cycle"</span>)) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/compute.html'>compute</a></span>()</div><div class='output co'>#&gt; ── Table source ────────────────────────────────────────────────────────────────
#&gt; src:  &lt;environment: R_GlobalEnv&gt;
#&gt; ── Data model ──────────────────────────────────────────────────────────────────
#&gt; Tables: `airlines`, `airports`, `flights`, `planes`, `weather`
#&gt; Columns: 53
#&gt; Primary keys: 3
#&gt; Foreign keys: 3
#&gt; ── Filters ─────────────────────────────────────────────────────────────────────
#&gt; None</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Tobias Schieferdecker, <a href='http://krlmlr.info'>Kirill Müller</a>, <a href='https://www.energie360.ch'><img src="https://krlmlr.github.io/dm/reference/figures/energie-72.png" height="16"/></a>, <a href='https://www.cynkra.com'><img src="https://krlmlr.github.io/dm/reference/figures/cynkra-72.png" height="16"/></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


